#### BART_physicalActivity

This repository contains script for the paper    
_Application of Bayesian Additive Regression Tree (BART) on accelerometer data generated by wearable devices, with the aim to classify physical activity type and intensity._      
`https://www.medrxiv.org/content/10.1101/2023.08.16.23294126v1.full`

Processed accelerometor data are found in   
  `https://doi.org/10.7910/DVN/LXVZRC`
  
Processing (standardization of data to 30Hz, removal of corrupt signals and participants with failed measurements , and generation of predictive features) is done by the script `DataPrep_andDescription_5sec.R`. 
Resulting training and test data are found in the weblink above, along with the raw data. 

BART and random forest were fit and tested by the script   
`BART_src/BART_BatchCode.R`   

Note that this script can be called by SLURM for parallel processing by the script    
`BART_job_test_argTest_looCV_array.sh`   
Or the R codes can be run independently.   
However, note that each fold of leave-one-subject-cross-validation could take approximately 7 hours or more, depending on the number of regression trees (default is 50)

The R scripts will save MCMC outputs from BART and the classificaiton outputs from random forest (benchmark). These data can be access by 
`summary_BART_RF.Rmd`  
  
These scripts use functions stored in `functions/`     

The summary script is adapted to a Linux enviroment with a multicore capacity. So, if not using parallel processing or using Windows OS, good to replace `mclapply` ith `lappy`.  






